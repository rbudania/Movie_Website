<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Sign Up</title>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
        <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"/>
        <link type="text/css" rel="stylesheet" href="main.css"/>
    </head>
    <body>
        <div class="navbar-fixed">
            <nav>
                <div class="nav-wrapper">
                </div>
            </nav>
        </div>

        <div class="container">
            <div class="row">
                <div class="col s12 m8 offset-m2 l6 offset-l3">
                    <form id="signup-form" class="signup-form">
                        <div class="input-field">
                            <input
                                type="text"
                                id="fullName"
                                name="fullName"
                                class="validate"
                                required
                            />
                            <label for="fullName">Full Name</label>
                        </div>
                        <div class="input-field">
                            <input
                                type="email"
                                id="emailAddress"
                                name="emailAddress"
                                class="validate"
                                required
                            />
                            <label for="emailAddress">Email Address</label>
                        </div>
                        <div class="input-field">
                            <input
                                type="password"
                                id="password"
                                name="password"
                                class="validate"
                                required
                            />
                            <label for="password">Password</label>
                            <span class="helper-text">
                                Atleast 8 character long. Must have an uppercase letter and an integer
                            </span>
                        </div>
                        <button
                            type="submit"
                            class="waves-effect waves-light btn"
                        >
                            Sign up
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <script type="text/javascript" src="main.js"></script>
        <script>
            var signupForm = document.getElementById('signup-form');
            var nameInput = document.getElementById('fullName');
            var emailInput = document.getElementById('emailAddress');
            var passwordInput = document.getElementById('password');

            nameInput.oninput = function() {
                // if(!nameInput.validity.valueMissing) {
                    if(!nameInput.value.match(/^[A-Za-z\s]+$/)) {
                        nameInput.setCustomValidity('Name must contain only alphabets (without any special character or number)');
                    } else {
                        nameInput.setCustomValidity('');
                    }
                // }
            }

            // emailInput.oninput = function() {
            //     if(!(emailInput.validity.valueMissing || emailInput.validity.typeMismatch)) {
            //         if(!emailInput.value.match(/* email-regex */)) {
            //             emailInput.setCustomValidity('Please enter a valid email address');
            //         } else {
            //             emailInput.setCustomValidity('');
            //         }
            //     }
            // }

            passwordInput.oninput = function() {
                // if(!passwordInput.validity.valueMissing) {
                    if(passwordInput.value.length < 8) {
                        passwordInput.setCustomValidity('Password must be atleast 8 character long');
                    } else if(!passwordInput.value.match(/\d/)) {
                        passwordInput.setCustomValidity('Password must contain atleast 1 number');
                    } else if(!passwordInput.value.match(/[A-Z]/)) {
                        passwordInput.setCustomValidity('Password must contain atleast 1 uppercase letter');
                    } else {
                        passwordInput.setCustomValidity('');
                    }
                // }
            }

            signupForm.onsubmit = function(event) {
                event.preventDefault();
                var fullName = event.target.fullName.value;
                var emailAddress = event.target.emailAddress.value;
                var password = event.target.password.value;
                // store session
                window.location.href = 'list.html';
            }
        </script>
    </body>
</html>